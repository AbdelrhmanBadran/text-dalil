import{a as fe}from"./chunk-KSQMFLIM.js";import{$ as x,A as _,Ea as ue,F as b,Ga as Y,H as c,Ha as j,Ia as ne,Jb as L,K as l,Ka as B,L as a,La as V,M as v,Mb as ge,P as I,Pa as R,Pb as _e,Q as C,Qb as xe,R as f,S as z,Ta as F,Ua as Z,Wa as N,Y as ie,Z as d,_ as P,aa as w,ca as de,da as ce,ea as pe,eb as ee,fa as H,gb as te,ha as J,ja as p,ka as m,kb as A,lb as $,mc as he,n as Q,oc as ve,q as M,qa as D,r as G,ra as T,s as y,sa as X,t as O,ta as k,ua as me,v as S,va as E,y as q,z as o}from"./chunk-IY7OHWIH.js";var Ee=n=>["/facility/details/",n];function je(n,s){if(n&1){let i=I();l(0,"span",20),C("click",function(){y(i);let t=f().$implicit,r=f(2);return O(r.goToMaps(t))}),v(1,"i",21),d(2),a()}if(n&2){let i=f().$implicit,e=f(2);o(2),x(" ",e.decimalPipe.transform(i==null?null:i.distance,"1.2-2"),"KM ")}}function Be(n,s){if(n&1&&(l(0,"a",22),v(1,"i",23),d(2),a()),n&2){let i=f().$implicit;c("href","tel:"+i.mobile,q),o(2),x(" ",i.mobile," ")}}function Ve(n,s){if(n&1){let i=I();l(0,"p-button",24),p(1,"translate"),C("click",function(){y(i);let t=f().$implicit,r=f(2);return O(r.reserveAgain(t.id,t.total_quantity))}),a()}n&2&&(z("label",m(1,2,"reserve again")),c("outlined",!0))}function Fe(n,s){if(n&1){let i=I();l(0,"p-button",24),p(1,"translate"),C("click",function(){y(i);let t=f(),r=t.$implicit,u=t.index,g=f(2);return O(g.ChangeStatus(r.id,"Received",u,r.user_id))}),a()}n&2&&(z("label",m(1,2,"Receive")),c("outlined",!0))}function Ne(n,s){if(n&1){let i=I();l(0,"p-button",25),p(1,"translate"),C("onClick",function(){y(i);let t=f(),r=t.$implicit,u=t.index,g=f(2);return O(g.ChangeStatus(r.id,"Canceled",u,r.user_id))}),a()}n&2&&(z("label",m(1,2,"cancel")),c("outlined",!0))}function qe(n,s){n&1&&(l(0,"span",26),d(1),p(2,"translate"),a()),n&2&&(o(),x(" ",m(2,1,"Received")," "))}function ze(n,s){n&1&&(l(0,"span",27),d(1),p(2,"translate"),a()),n&2&&(o(),x(" ",m(2,1,"Canceled")," "))}function Re(n,s){if(n&1){let i=I();l(0,"div",6)(1,"div",7)(2,"h4"),d(3),p(4,"translate"),a(),l(5,"span"),d(6),p(7,"date"),a()(),l(8,"div",8)(9,"a",9)(10,"h6"),d(11),a()(),b(12,je,3,1,"span",10)(13,Be,3,2,"a",11),a(),l(14,"div",12)(15,"h6"),d(16),p(17,"translate"),a(),l(18,"span"),d(19),p(20,"translate"),p(21,"egyptianPound"),a()(),l(22,"div",13)(23,"p-button",14),p(24,"translate"),C("click",function(){let t=y(i).$implicit,r=f(2);return O(r.getOrderDetails(t==null?null:t.id))}),a(),b(25,Ve,2,4,"p-button",15)(26,Fe,2,4,"p-button",15)(27,Ne,2,4,"p-button",16)(28,qe,3,3,"span",17)(29,ze,3,3,"span",18),a(),v(30,"div",19),a()}if(n&2){let i=s.$implicit,e=f(2);o(3),w(" ",m(4,18,"number of reservation"),"#",i==null?null:i.id," "),o(3),x(" ",m(7,20,i==null?null:i.date_added)," "),o(3),c("routerLink",J(30,Ee,i.facility_id)),o(2),x(" ",i==null?null:i.user_name," "),o(),c("ngIf",e.userMode&&(i==null?null:i.distance)),o(),c("ngIf",!e.userMode),o(3),w(" ",m(17,22,"quantity")," : ",i==null?null:i.total_quantity," "),o(3),w(" ",m(20,24,"total price")," : ",m(21,26,i==null?null:i.total_price)," "),o(4),z("label",m(24,28,"details")),c("outlined",!0),o(2),c("ngIf",e.state!=="Processing"&&e.userMode),o(),c("ngIf",e.state=="Processing"),o(),c("ngIf",e.state=="Processing"),o(),c("ngIf",e.state=="Received"),o(),c("ngIf",e.state=="Canceled")}}function Ae(n,s){if(n&1&&(l(0,"div",4),b(1,Re,31,32,"div",5),a()),n&2){let i=f();o(),c("ngForOf",i.orders)}}function $e(n,s){n&1&&(l(0,"div"),v(1,"img",28),l(2,"h5",29),d(3),p(4,"translate"),a()()),n&2&&(o(3),x(" ",m(4,1,"sorry, there is no content")," "))}var Oe=(()=>{let s=class s{constructor(e,t,r,u,g,h,U,W,Se){this.translate=e,this.common=t,this.order=r,this.spinner=u,this.message=g,this.router=h,this.decimalPipe=U,this.notify=W,this.platformId=Se,this.state="",this.loading=!0,this.noContent=!0,this.orders=[],this.userMode=!1,this.visitorMode=!0,E(this.platformId)&&(this.userMode=localStorage.getItem("profile-mode")=="user",this.visitorMode=localStorage.getItem("isVisitor")=="true")}ngOnInit(){this.spinner.show(),console.log(this.state),this.AllOrders=this.order.getOrders(this.state).subscribe({next:e=>{console.log(e),e?.success?(this.orders=e?.data,this.orders.length==0?this.noContent=!0:this.noContent=!1):this.noContent=!0,this.spinner.hide(),this.loading=!1},error:e=>{console.log(e),this.spinner.hide(),this.noContent=!0,this.loading=!1}})}reserveAgain(e,t){this.order.reserveAgain(e).subscribe({next:r=>{if(console.log(r),r?.success){let u=this.order.cartNum.getValue();this.order.cartNum.next(t-0+u),this.translate.get("reserve again done").subscribe(g=>{this.message.add({severity:"success",detail:g})})}else this.translate.get(r?.error).subscribe(u=>{this.message.add({severity:"error",detail:u})})},error:r=>{console.log(r)}})}getOrderDetails(e){this.router.navigate(["/orders/orderDetails",e])}receiveOrder(){}ChangeStatus(e,t,r,u){console.log(t),this.orders.splice(r,1),this.orders.length==0&&(this.noContent=!0),this.order.ChangeStatus(e,t).subscribe({next:g=>{console.log(g),g?.success&&(t=="Canceled"?(this.translate.get("order is canceled").subscribe(h=>{this.message.add({severity:"success",detail:h})}),this.notify.sendNotificationByType("","","TheOrderIsCanceled","","","",u,e).subscribe({next:h=>{console.log(h)},error:h=>{console.log(h)}})):(this.translate.get("order is received").subscribe(h=>{this.message.add({severity:"success",detail:h})}),this.notify.sendNotificationByType("","","TheOrderIsReceived","","","",u,e).subscribe({next:h=>{console.log(h)},error:h=>{console.log(h)}})))}})}goToMaps(e){let t=`https://www.google.com/maps?q=${e?.lat},${e?.lon}`;setTimeout(()=>{window.open(t,"_blank")},100)}ngOnDestroy(){this.AllOrders.unsubscribe()}};s.\u0275fac=function(t){return new(t||s)(_(B),_(F),_(N),_(A),_(R),_(Y),_(k),_(Z),_(S))},s.\u0275cmp=M({type:s,selectors:[["app-order-state"]],inputs:{state:"state"},features:[H([k])],decls:5,vars:3,consts:[["class","bg-white d-flex flex-column gap-3 order-state ",4,"ngIf"],[4,"ngIf"],[1,"position-relative","mt-5"],["bdColor","#fff","size","default","color","#80b127","type","ball-clip-rotate",3,"fullScreen"],[1,"bg-white","d-flex","flex-column","gap-3","order-state"],["class","order-details  rounded-3 border border-1 d-flex flex-column gap-3",4,"ngFor","ngForOf"],[1,"order-details","rounded-3","border","border-1","d-flex","flex-column","gap-3"],[1,"order-header","d-flex","justify-content-between","align-items-center","gap-3"],[1,"order-facility","d-flex","justify-content-between","align-items-center"],[1,"text-body",3,"routerLink"],["style","cursor: pointer; color: #000000b5;",3,"click",4,"ngIf"],["style","cursor: pointer; color: #000000b5;",3,"href",4,"ngIf"],[1,"order-footer","d-flex","justify-content-between","align-items-center"],[1,"order-action","d-flex","justify-content-between","align-items-center"],["severity","secondary",3,"click","label","outlined"],["severity","success",3,"label","outlined","click",4,"ngIf"],["severity","danger",3,"label","outlined","onClick",4,"ngIf"],["class","main-color",4,"ngIf"],["class","text-danger",4,"ngIf"],[1,"postion-relative"],[2,"cursor","pointer","color","#000000b5",3,"click"],[1,"fa-solid","fa-location-dot"],[2,"cursor","pointer","color","#000000b5",3,"href"],[1,"fa-solid","fa-phone-volume","main-color"],["severity","success",3,"click","label","outlined"],["severity","danger",3,"onClick","label","outlined"],[1,"main-color"],[1,"text-danger"],["src","assets/images/not found/sub-not_found.svg","height","300px","alt","no-orders",1,"d-block","m-auto","w-100"],[1,"text-center","mt-2",2,"font-family","'themify22' , sans-serif"]],template:function(t,r){t&1&&(b(0,Ae,2,1,"div",0)(1,$e,5,3,"div",1),v(2,"p-toast"),l(3,"div",2),v(4,"ngx-spinner",3),a()),t&2&&(c("ngIf",!r.loading&&!r.noContent),o(),c("ngIf",r.noContent&&!r.loading),o(3),c("fullScreen",!1))},dependencies:[D,T,j,ee,te,$,X,L,V],styles:[".order-state[_ngcontent-%COMP%]{padding:0 20px}.order-state[_ngcontent-%COMP%]   .order-details[_ngcontent-%COMP%]{padding:20px}.order-state[_ngcontent-%COMP%]   .order-details[_ngcontent-%COMP%]   .order-header[_ngcontent-%COMP%], .order-state[_ngcontent-%COMP%]   .order-details[_ngcontent-%COMP%]   .order-facility[_ngcontent-%COMP%], .order-state[_ngcontent-%COMP%]   .order-details[_ngcontent-%COMP%]   .order-footer[_ngcontent-%COMP%]{font-size:14px}@media screen and (max-width: 577px){.order-state[_ngcontent-%COMP%]{padding:0 5px}.order-state[_ngcontent-%COMP%]   .order-details[_ngcontent-%COMP%]{padding:5px}.order-state[_ngcontent-%COMP%]   .order-header[_ngcontent-%COMP%], .order-state[_ngcontent-%COMP%]   .order-facility[_ngcontent-%COMP%], .order-state[_ngcontent-%COMP%]   .order-footer[_ngcontent-%COMP%]{font-size:14px}}.order-state[_ngcontent-%COMP%]    {font-family:themify22,sans-serif!important}.order-state[_ngcontent-%COMP%]     .p-tabview-panels{background-color:transparent}.order-state[_ngcontent-%COMP%]     .p-tabview-nav-content ul{border:none;display:flex;justify-content:center;align-items:center;background-color:transparent;font-family:themify22,sans-serif}@media screen and (max-width: 577px){.order-state[_ngcontent-%COMP%]     .p-tabview-nav-content ul{padding-left:0}}.order-state[_ngcontent-%COMP%]     .p-tabview-nav-content li a{border:none;border:1px solid #CDCDCD;border-radius:10px;transition:.3s all ease-out;margin:0 5px;color:#7a7a7a;font-weight:700}@media screen and (max-width: 577px){.order-state[_ngcontent-%COMP%]     .p-tabview-nav-content li a{padding:10px}}.order-state[_ngcontent-%COMP%]     .p-tabview-nav-content li a:hover{background:#80b127;color:#fff}.order-state[_ngcontent-%COMP%]     .p-tabview-nav-content .p-highlight a{background:#80b127;color:#fff}.order-state[_ngcontent-%COMP%]   .order-details[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#9b9b9b}  .p-button{border-radius:5px;padding:.25rem .75rem}  .p-button.p-button-success.p-button-outlined,   .p-button-group.p-button-success>.p-button.p-button-outlined,   .p-splitbutton.p-button-success>.p-button.p-button-outlined{background-color:transparent;color:#80b127;border:1px solid}"]});let n=s;return n})();function Ue(n,s){if(n&1&&v(0,"app-order-state",15),n&2){let i=f().$implicit;c("state",i)}}function We(n,s){if(n&1&&(l(0,"p-tabPanel",13),p(1,"translate"),b(2,Ue,1,1,"app-order-state",14),a()),n&2){let i=s.$implicit,e=s.index,t=f();z("header",m(1,2,i)),o(2),c("ngIf",t.statesOn[e])}}var Ie=(()=>{let s=class s{constructor(e,t,r,u){this.translate=e,this.common=t,this.order=r,this.platformId=u,this.breadCrumbItem="",this.states=["Received","Processing","Canceled"],this.statesOn=[!1,!0,!1],E(this.platformId)&&this.translate.use(localStorage.getItem("front-lang")==null?"ar":localStorage.getItem("front-lang"))}ngOnInit(){}ngAfterViewInit(){setTimeout(()=>{this.breadCrumbItem=this.states[1]},100)}onActiveTabChange(e){console.log("Active tab changed:",e)}onTabChange(e){e.index===0?(this.breadCrumbItem=this.states[0],this.statesOn[0]=!0,this.statesOn[1]=!1,this.statesOn[2]=!1):e.index===1?(this.breadCrumbItem=this.states[1],this.statesOn[1]=!0,this.statesOn[0]=!1,this.statesOn[2]=!1):e.index===2&&(this.breadCrumbItem=this.states[2],this.statesOn[2]=!0,this.statesOn[0]=!1,this.statesOn[1]=!1)}};s.\u0275fac=function(t){return new(t||s)(_(B),_(F),_(N),_(S))},s.\u0275cmp=M({type:s,selectors:[["app-user-orders"]],decls:23,vars:11,consts:[[1,"orders"],[1,"container"],[1,"row"],[1,"col-12"],[1,"breadcrumbb","position-relative",2,"z-index","12"],[1,"position-relative",2,"z-index","12"],["src","assets/images/orderBreadcrumb.png","alt","orderBreadcrumb",1,"position-absolute","top-0","start-0","w-100","h-100"],[1,"position-relative","d-flex",2,"z-index","12"],["routerLink","/",1,"text-white"],[1,"mx-2"],[1,"col-md-8","pt-3","bg-white","rounded-3"],[3,"onChange","activeIndex"],[3,"header",4,"ngFor","ngForOf"],[3,"header"],[3,"state",4,"ngIf"],[3,"state"]],template:function(t,r){t&1&&(l(0,"section",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"h2",5),d(6),p(7,"translate"),a(),v(8,"img",6),l(9,"div",7)(10,"a",8)(11,"h5"),d(12),p(13,"translate"),a()(),l(14,"span",9),d(15,">"),a(),l(16,"h6"),d(17),p(18,"translate"),a()()()(),l(19,"div",10)(20,"div",5)(21,"p-tabView",11),C("onChange",function(g){return r.onTabChange(g)}),b(22,We,3,4,"p-tabPanel",12),a()()()()()()),t&2&&(o(6),P(m(7,5,"Reservations")),o(6),x(" ",m(13,7,"Main")," "),o(5),P(m(18,9,r.breadCrumbItem)),o(4),c("activeIndex",1),o(),c("ngForOf",r.states))},dependencies:[D,T,j,xe,_e,Oe,V],styles:[".orders[_ngcontent-%COMP%]   .breadcrumbb[_ngcontent-%COMP%]{margin:30px 0;padding:50px 40px;background-color:#80b127;color:#fff;border-radius:10px;overflow:hidden}@media screen and (max-width: 577px){.orders[_ngcontent-%COMP%]   .breadcrumbb[_ngcontent-%COMP%]{margin:10px 0;padding:20px}}.orders[_ngcontent-%COMP%]   .breadcrumbb[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{opacity:10%;transform:scale(1.1,3.5)}.orders[_ngcontent-%COMP%]   .breadcrumbb[_ngcontent-%COMP%]   .main-breadcrumb[_ngcontent-%COMP%]{font-size:20px}.orders[_ngcontent-%COMP%]     .p-card-content{font-family:themify22,sans-serif!important}.orders[_ngcontent-%COMP%]     .p-tabview-panels{background-color:transparent}@media screen and (max-width: 577px){.orders[_ngcontent-%COMP%]     .p-tabview-panels{padding:0}}.orders[_ngcontent-%COMP%]     .p-tabview-nav-content ul{border:none;display:flex;justify-content:center;align-items:center;background-color:transparent;font-family:themify22,sans-serif}@media screen and (max-width: 577px){.orders[_ngcontent-%COMP%]     .p-tabview-nav-content ul{padding-left:0}}.orders[_ngcontent-%COMP%]     .p-tabview-nav-content li a{border:none;border:1px solid #CDCDCD;border-radius:10px;transition:.3s all ease-out;margin:0 5px;color:#7a7a7a;font-weight:700}@media screen and (max-width: 577px){.orders[_ngcontent-%COMP%]     .p-tabview-nav-content li a{padding:10px}}.orders[_ngcontent-%COMP%]     .p-tabview-nav-content li a:hover{background:#80b127;color:#fff}.orders[_ngcontent-%COMP%]     .p-tabview-nav-content .p-highlight a{background:#80b127;color:#fff}.orders[_ngcontent-%COMP%]     .p-toast .p-toast-message .p-toast-message-content .p-toast-detail{font-family:themify22,sans-serif;margin:.3rem .5rem}"]});let n=s;return n})();function Ke(n,s){if(n&1){let i=I();l(0,"span",27),C("click",function(){y(i);let t=f(),r=t.$implicit,u=t.index,g=ie(13),h=f(2);return O(h.decrement(g,r.id,u))}),d(1,"-"),a()}}function Qe(n,s){if(n&1){let i=I();l(0,"div",18)(1,"div",19)(2,"div",20)(3,"img",21),C("error",function(t){y(i);let r=f(2);return O(r.common.handleImage(t))}),a()(),l(4,"div",22)(5,"h4"),d(6),a(),l(7,"span",23),d(8),p(9,"egyptianPound"),a(),l(10,"div",24),b(11,Ke,2,0,"span",25),v(12,"input",26,0),l(14,"span",27),C("click",function(){let t=y(i),r=t.$implicit,u=t.index,g=ie(13),h=f(2);return O(h.increment(g,r.id,u))}),d(15,"+"),a()()()(),l(16,"div",28)(17,"p-button",29),C("click",function(){let t=y(i),r=t.$implicit,u=t.index,g=f(2);return O(g.deleteItemCart(r.id,u))}),v(18,"img",30),a(),l(19,"div"),d(20),p(21,"egyptianPound"),a()()()}if(n&2){let i=s.$implicit,e=s.index,t=f(2);o(3),c("src",t.order.productUrl+i.attachment.name,q),o(3),x(" ",i.product_name," "),o(2),x(" ",m(9,6,i.price)," "),o(3),c("ngIf",t.qtnTotal[e]>1),o(),c("value",t.qtnTotal[e]),o(8),x(" ",m(21,8,t.postPrices[e]*t.qtnTotal[e])," ")}}function Ge(n,s){if(n&1&&(l(0,"div",16),b(1,Qe,22,10,"div",17),a()),n&2){let i=f();o(),c("ngForOf",i.cartItems)}}function He(n,s){if(n&1){let i=I();l(0,"div",31)(1,"div",32)(2,"span"),d(3),p(4,"translate"),a(),l(5,"span"),d(6),p(7,"egyptianPound"),a()(),v(8,"hr"),l(9,"div",33)(10,"button",34),C("click",function(){y(i);let t=f();return O(t.confirmOrder())}),d(11),p(12,"translate"),a()()()}if(n&2){let i=f();o(3),x(" ",m(4,3,"total")," "),o(3),x(" ",m(7,5,i.totalCartPrice)," "),o(5),x(" ",m(12,7,"confirm reserve")," ")}}function Je(n,s){n&1&&(l(0,"div",35)(1,"div",36),v(2,"img",37),l(3,"h5",38),d(4),p(5,"translate"),a()()()),n&2&&(o(4),x(" ",m(5,1,"cart is empty")," "))}var Pe=(()=>{let s=class s{constructor(e,t,r,u,g,h,U,W){this.order=e,this.message=t,this.translate=r,this.spinner=u,this.common=g,this.notify=h,this.router=U,this.platformId=W,this.cartItems=[],this.totalCartPrice="",this.qtnTotal=[],this.loading=!0,this.empty=!1,this.postPrices=[],this.dataDone=!1,E(this.platformId)&&this.translate.use(localStorage.getItem("front-lang")==null?"ar":localStorage.getItem("front-lang"))}ngOnInit(){this.spinner.show(),this.Cart=this.order.getCart().subscribe({next:e=>{console.log(e),e?.success?(this.spinner.hide(),this.facilityId=e?.data.facility_id,this.cartItems=e?.data.items,this.cartItems?.length>0?(this.totalCartPrice=e?.data.total_price,this.cartItems?.forEach(t=>{this.qtnTotal.push(t.quantity),this.postPrices.push(t.price)}),this.dataDone=!0,this.empty=!1):(this.empty=!0,this.dataDone=!1,this.spinner.hide())):(this.spinner.hide(),this.empty=!0,this.dataDone=!1)},error:e=>{console.log(e),this.spinner.hide(),this.dataDone=!1,this.empty=!0}})}decrement(e,t,r){let u=this.order.cartNum.getValue();this.order.cartNum.next(u-1),e.value>1?(this.qtnTotal[r]--,this.totalCartPrice=this.totalCartPrice-this.postPrices[r]*1,this.order.updateQuantity(t,e.value-1).subscribe({next:g=>{console.log(g),g?.success&&this.translate.get("cart updated successfully").subscribe(h=>{this.message.add({severity:"success",detail:h})})},error:g=>{console.log(g)}})):this.cartItems?.length==1?this.emptyCart():this.deleteItemCart(t,r)}increment(e,t,r){this.qtnTotal[r]++;let u=this.order.cartNum.getValue();this.order.cartNum.next(u+1),this.totalCartPrice=this.totalCartPrice+this.postPrices[r]*1,this.order.updateQuantity(t,e.value-0+1).subscribe({next:g=>{console.log(g),g?.success?this.translate.get("cart updated successfully").subscribe(h=>{this.message.add({severity:"success",detail:h})}):this.translate.get("something went wrong").subscribe(h=>{this.message.add({severity:"error",detail:h})})},error:g=>{console.log(g)}})}deleteItemCart(e,t){if(this.cartItems.splice(t,1),this.cartItems?.length==0){this.emptyCart(),this.empty=!0;return}this.order.deleteItem(e).subscribe({next:r=>{console.log(r),r?.success&&this.translate.get("cart item deleted successfully").subscribe(u=>{this.message.add({severity:"success",detail:u})})},error:r=>{console.log(r)}})}emptyCart(){this.empty=!0,this.dataDone=!1,this.order.emptyCart().subscribe({next:e=>{console.log(e),e?.success&&(this.order.cartNum.next(0),this.translate.get("cart deleted successfully").subscribe(t=>{this.message.add({severity:"success",detail:t})}))},error:e=>{console.log(e)}})}confirmOrder(){this.order.addOrder().subscribe({next:e=>{console.log(e),e?.success&&(this.order.cartNum.next(0),this.translate.get("order added successfully").subscribe(t=>{this.message.add({severity:"success",detail:t})}),this.notify.sendNotificationByType("","","addOrder","",this.facilityId,"","",e?.data).subscribe({next:t=>{console.log(t)},error:t=>{console.log(t)}}),setTimeout(()=>{this.router.navigate(["/orders/orderDetails",e?.data])},1e3))},error:e=>{console.log(e)}})}ngOnDestroy(){this.Cart.unsubscribe()}};s.\u0275fac=function(t){return new(t||s)(_(N),_(R),_(B),_(A),_(F),_(Z),_(Y),_(S))},s.\u0275cmp=M({type:s,selectors:[["app-cart"]],decls:25,vars:13,consts:[["qtn",""],[1,"cart"],[1,"container"],[1,"row"],[1,"col-12"],[1,"breadcrumbb","position-relative",2,"z-index","12"],[1,"position-relative",2,"z-index","12"],["src","assets/images/orderBreadcrumb.png","alt","orderBreadcrumb",1,"position-absolute","top-0","start-0","w-100","h-100"],["routerLink","/",1,"main-breadcrumb","text-white"],[1,"mx-2"],[1,"col-md-7"],[1,"position-relative","mt-3"],["bdColor","#fff","size","default","color","#80b127","type","ball-clip-rotate",3,"fullScreen"],["class","bg-white rounded-3 p-3 d-flex flex-column gap-3",4,"ngIf"],["class","rounded-3 p-3 d-flex flex-column gap-3 mt-3 total-container",4,"ngIf"],["class","col-md-9",4,"ngIf"],[1,"bg-white","rounded-3","p-3","d-flex","flex-column","gap-3"],["class","cart-details d-flex gap-3 border border-1 rounded-2 p-2 justify-content-between",4,"ngFor","ngForOf"],[1,"cart-details","d-flex","gap-3","border","border-1","rounded-2","p-2","justify-content-between"],[1,"order-header","d-flex","justify-content-between","align-items-center"],[1,"rounded-3","overflow-hidden","image-container"],["width","100px","alt","cart-img",3,"error","src"],[1,"d-flex","flex-column","gap-2","mx-2"],[1,"text-delete"],[1,"d-flex","justify-content-between","align-items-center","quantity-block"],["class","quantity-counter",3,"click",4,"ngIf"],["type","text","readonly","","disabled","",2,"width","32px",3,"value"],[1,"quantity-counter",3,"click"],[1,"left-cart","d-flex","flex-column","justify-content-between","align-items-end"],[3,"click"],["src","assets/images/pin.png","width","15px","height","17px","alt","pin"],[1,"rounded-3","p-3","d-flex","flex-column","gap-3","mt-3","total-container"],[1,"d-flex","align-items-center","justify-content-between"],[1,"d-flex","align-items-center","justify-content-center"],[1,"confirm-btn",3,"click"],[1,"col-md-9"],[1,"d-flex","flex-column","justify-content-center","align-items-center"],["src","assets/images/undraw_empty_cart_co35.svg","alt","empty-cart",1,"empty-cart"],[1,"mt-2"]],template:function(t,r){t&1&&(l(0,"section",1)(1,"div",2)(2,"div",3)(3,"div",4)(4,"div",5)(5,"h2",6),d(6),p(7,"translate"),a(),v(8,"img",7),l(9,"div",6)(10,"a",8),d(11),p(12,"translate"),a(),l(13,"span",9),d(14,">"),a(),l(15,"span"),d(16),p(17,"translate"),a()()()(),l(18,"div",10)(19,"div",11),v(20,"ngx-spinner",12),a(),b(21,Ge,2,1,"div",13)(22,He,13,9,"div",14),a(),b(23,Je,6,3,"div",15),a()()(),v(24,"p-toast")),t&2&&(o(6),P(m(7,7,"Cart")),o(5),P(m(12,9,"Main")),o(5),P(m(17,11,"Cart")),o(4),c("fullScreen",!1),o(),c("ngIf",r.dataDone),o(),c("ngIf",r.dataDone),o(),c("ngIf",r.empty))},dependencies:[D,T,j,ee,te,$,L,V],styles:[".cart[_ngcontent-%COMP%]   .breadcrumbb[_ngcontent-%COMP%]{margin:30px 0;padding:50px 40px;background-color:#80b127;color:#fff;border-radius:10px;overflow:hidden}@media screen and (max-width: 577px){.cart[_ngcontent-%COMP%]   .breadcrumbb[_ngcontent-%COMP%]{margin:10px 0;padding:20px}}.cart[_ngcontent-%COMP%]   .breadcrumbb[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{opacity:10%;transform:scale(1.1,3.5)}.cart[_ngcontent-%COMP%]   .breadcrumbb[_ngcontent-%COMP%]   .main-breadcrumb[_ngcontent-%COMP%]{font-size:20px}.cart[_ngcontent-%COMP%]   .quantity-block[_ngcontent-%COMP%]{border-color:#80b127;padding:2px 3px;border:1px solid #80B127;border-radius:14px;width:fit-content}.cart[_ngcontent-%COMP%]   .quantity-block[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:32px;text-align:center;border:none;outline:none;background-color:transparent}.cart[_ngcontent-%COMP%]   .quantity-counter[_ngcontent-%COMP%]{width:30px;height:30px;background-color:#80b127;border-radius:10px;display:flex;justify-content:center;align-items:center;font-size:20px;cursor:pointer;color:#fff}.cart[_ngcontent-%COMP%]   .empty-cart[_ngcontent-%COMP%]{height:300px;display:block}.cart[_ngcontent-%COMP%]   .text-delete[_ngcontent-%COMP%]{color:#db3022}.cart[_ngcontent-%COMP%]   .image-container[_ngcontent-%COMP%]{width:100px;height:100px;display:flex;justify-content:center;align-items:center}.cart[_ngcontent-%COMP%]   .image-container[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:100%;object-fit:cover;height:100%}.cart[_ngcontent-%COMP%]   .total-container[_ngcontent-%COMP%]{background-color:#80b1271a}.cart[_ngcontent-%COMP%]   .total-container[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-weight:700}.cart[_ngcontent-%COMP%]   .confirm-btn[_ngcontent-%COMP%]{background-color:#80b127;padding:15px 50px;border-radius:10px;border:none;color:#fff}  .p-card-content{font-family:themify22,sans-serif!important}  .p-tabview-panels{background-color:transparent}  .p-tabview-nav-content ul{border:none;display:flex;justify-content:center;align-items:center;background-color:transparent;font-family:themify22,sans-serif}@media screen and (max-width: 577px){  .p-tabview-nav-content ul{padding-left:0}}  .p-tabview-nav-content li a{border:none;border:1px solid #CDCDCD;border-radius:10px;transition:.3s all ease-out;margin:0 5px;color:#7a7a7a;font-weight:700}@media screen and (max-width: 577px){  .p-tabview-nav-content li a{padding:10px}}  .p-tabview-nav-content li a:hover{background:#80b127;color:#fff}  .p-tabview-nav-content .p-highlight a{background:#80b127;color:#fff}  .left-cart button{background-color:#db3022;padding:7px;border-radius:10px;border:none}  .p-toast .p-toast-message .p-toast-message-content .p-toast-detail{font-family:themify22,sans-serif;margin:.3rem .5rem}"]});let n=s;return n})();var Xe=n=>["/facility/details/",n];function Ye(n,s){if(n&1){let i=I();l(0,"span",24),C("click",function(){y(i);let t=f(2);return O(t.goToMaps(t.orderDetails))}),v(1,"i",25),d(2),a()}if(n&2){let i=f(2);o(2),x(" ",i.decimalPipe.transform(i.orderDetails==null?null:i.orderDetails.distance,"1.2-2"),"KM ")}}function Ze(n,s){if(n&1&&(l(0,"a",26),v(1,"i",27),d(2),a()),n&2){let i=f(2);c("href","tel:"+i.orderDetails.mobile,q),o(2),x(" ",i.orderDetails.mobile," ")}}function et(n,s){if(n&1&&(l(0,"div",28)(1,"div",29),v(2,"img",30),a(),l(3,"div",31)(4,"div",32)(5,"h3",33),d(6),p(7,"capitalize"),a(),l(8,"p"),d(9),p(10,"egyptianPound"),a(),l(11,"p"),d(12),p(13,"translate"),a()(),l(14,"div",34),d(15),p(16,"egyptianPound"),a()()()),n&2){let i=s.$implicit,e=f(2);o(2),c("src",e.order.productUrl+(i==null?null:i.attachment.name),q),o(4),x(" ",m(7,6,i==null?null:i.product_name)," "),o(3),x(" ",m(10,8,i==null?null:i.price)," "),o(3),w(" ",i==null?null:i.quantity," ",m(13,10,"items")," "),o(3),x(" ",m(16,12,i==null?null:i.total_price)," ")}}function tt(n,s){if(n&1){let i=I();l(0,"div",13)(1,"div",5)(2,"div",14)(3,"div",15)(4,"h4"),d(5),p(6,"translate"),a(),l(7,"span"),d(8),p(9,"date"),a()(),l(10,"div",16)(11,"h6")(12,"a",17),d(13),a()(),b(14,Ye,3,1,"span",18)(15,Ze,3,2,"a",19),a(),l(16,"div",20)(17,"h6"),d(18),p(19,"translate"),a(),l(20,"span"),d(21),p(22,"translate"),p(23,"egyptianPound"),a()(),l(24,"div")(25,"p-messages",21),pe("valueChange",function(t){y(i);let r=f();return ce(r.messages,t)||(r.messages=t),O(t)}),a()(),l(26,"div")(27,"p"),d(28),l(29,"span"),d(30),p(31,"translate"),a()()(),l(32,"div",22),b(33,et,17,14,"div",23),a()()()()}if(n&2){let i=f();o(5),w(" ",m(6,17,"number of reservation"),"#",i.orderDetails==null?null:i.orderDetails.id," "),o(3),x(" ",m(9,19,i.orderDetails==null?null:i.orderDetails.date_added)," "),o(4),c("routerLink",J(29,Xe,i.orderDetails==null?null:i.orderDetails.facility_id)),o(),x(" ",i.orderDetails==null?null:i.orderDetails.user_name," "),o(),c("ngIf",i.userMode&&(i.orderDetails==null?null:i.orderDetails.distance)),o(),c("ngIf",!i.userMode),o(3),w(" ",m(19,21,"quantity")," : ",i.orderDetails==null?null:i.orderDetails.total_quantity," "),o(3),w(" ",m(22,23,"total price")," : ",m(23,25,i.orderDetails==null?null:i.orderDetails.total_price)," "),o(4),de("value",i.messages),c("enableService",!1)("closable",!1),o(3),x(" ",i.quantityOfItems," "),o(2),P(m(31,27,"items")),o(3),c("ngForOf",i.orderItems)}}var we=(()=>{let s=class s{constructor(e,t,r,u,g,h,U,W){this.order=e,this.acttivate=t,this.translate=r,this.common=u,this.message=g,this.spinner=h,this.decimalPipe=U,this.platformId=W,this.breadCrumbItem="",this.loading=!0,this.messages=[],this.allItems=[],this.orderItems=[],this.userMode=!0,this.visitorMode=!1,E(this.platformId)&&(this.translate.use(localStorage.getItem("front-lang")==null?"ar":localStorage.getItem("front-lang")),this.userMode=localStorage.getItem("profile-mode")=="user",this.visitorMode=localStorage.getItem("isVisitor")=="true")}ngOnInit(){this.spinner.show(),this.acttivate.paramMap.subscribe(e=>{let t=e?.get("id");this.order.getOrderDetails(t).subscribe({next:r=>{r?.success&&(this.spinner.hide(),this.orderDetails=r?.data,this.loading=!1,console.log(this.orderDetails),this.orderItems=r?.data.items,this.quantityOfItems=this.orderItems.reduce((u,g)=>g.quantity-0- -u,0),console.log(this.quantityOfItems),this.translate.get(this.orderDetails?.status).subscribe(u=>{this.orderDetails?.status=="Processing"?this.messages=[{severity:"info",detail:this.translate.instant("loading proccess")}]:this.orderDetails?.status=="Canceled"?this.messages=[{severity:"error",detail:u}]:this.orderDetails?.status=="Received"&&(this.messages=[{severity:"success",detail:u}])}))},error:r=>{console.log(r)}})})}goToMaps(e){let t=`https://www.google.com/maps?q=${e?.lat},${e?.lon}`;setTimeout(()=>{window.open(t,"_blank")},100)}};s.\u0275fac=function(t){return new(t||s)(_(N),_(ue),_(B),_(F),_(R),_(A),_(k),_(S))},s.\u0275cmp=M({type:s,selectors:[["app-order-details"]],features:[H([k])],decls:26,vars:12,consts:[[1,"orders"],[1,"container"],[1,"row"],[1,"col-12"],[1,"breadcrumbb","position-relative",2,"z-index","12"],[1,"position-relative",2,"z-index","12"],["src","assets/images/orderBreadcrumb.png","alt","orderBreadcrumb",1,"position-absolute","top-0","start-0","w-100","h-100"],[1,"position-relative","d-flex",2,"z-index","12"],["routerLink","/orders/Allorders",1,"text-white"],[1,"mx-2"],["class","col-md-7 bg-white p-4 rounded-3",4,"ngIf"],[1,"position-relative","mt-5"],["bdColor","#fff","size","default","color","#80b127","type","ball-clip-rotate",3,"fullScreen"],[1,"col-md-7","bg-white","p-4","rounded-3"],[1,"order-details","rounded-3","d-flex","flex-column","gap-3"],[1,"order-header","d-flex","justify-content-between","align-items-center","gap-3"],[1,"order-facility","d-flex","justify-content-between","align-orderDetailss-center"],[1,"fw-bold",2,"cursor","pointer","color","#000000b5",3,"routerLink"],["style","cursor: pointer; color: #000000b5;",3,"click",4,"ngIf"],["style","cursor: pointer; color: #000000b5;",3,"href",4,"ngIf"],[1,"order-footer","d-flex","justify-content-between","align-items-center"],[3,"valueChange","value","enableService","closable"],[1,"all-items"],["class","single-item mb-4 d-flex",4,"ngFor","ngForOf"],[2,"cursor","pointer","color","#000000b5",3,"click"],[1,"fa-solid","fa-location-dot"],[2,"cursor","pointer","color","#000000b5",3,"href"],[1,"fa-solid","fa-phone-volume","main-color"],[1,"single-item","mb-4","d-flex"],[1,"item-img"],["alt","order-img",1,"im-fluid",3,"src"],[1,"d-flex","justify-content-between","align-items-end","w-100"],[1,"order-detail","d-flex","flex-column","justify-content-start","p-2","mx-2"],[1,"mb-3"],[1,"px-1","fw-bold"]],template:function(t,r){t&1&&(l(0,"section",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"h2",5),d(6),p(7,"translate"),a(),v(8,"img",6),l(9,"div",7)(10,"a",8)(11,"h5"),d(12),p(13,"translate"),a()(),l(14,"span",9),d(15,">"),a(),l(16,"h6"),d(17),p(18,"translate"),a(),l(19,"span",9),d(20,">"),a(),l(21,"p"),d(22),a()()()(),b(23,tt,34,31,"div",10),l(24,"div",11),v(25,"ngx-spinner",12),a()()()()),t&2&&(o(6),P(m(7,6,"Reservations")),o(6),x(" ",m(13,8,"orders")," "),o(5),P(m(18,10,r.orderDetails==null?null:r.orderDetails.status)),o(5),x("#",r.orderDetails==null?null:r.orderDetails.id,""),o(),c("ngIf",!r.loading),o(2),c("fullScreen",!1))},dependencies:[D,T,j,ge,$,X,L,he,V],styles:[".orders[_ngcontent-%COMP%]   .breadcrumbb[_ngcontent-%COMP%]{margin:30px 0;padding:50px 40px;background-color:#80b127;color:#fff;border-radius:10px;overflow:hidden}@media screen and (max-width: 577px){.orders[_ngcontent-%COMP%]   .breadcrumbb[_ngcontent-%COMP%]{margin:10px 0;padding:20px}}.orders[_ngcontent-%COMP%]   .breadcrumbb[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{opacity:10%;transform:scale(1.1,3.5)}.orders[_ngcontent-%COMP%]   .breadcrumbb[_ngcontent-%COMP%]   .main-breadcrumb[_ngcontent-%COMP%]{font-size:20px}.orders[_ngcontent-%COMP%]     .p-message-wrapper{display:flex;justify-content:center}@media screen and (max-width: 577px){.orders[_ngcontent-%COMP%]     .p-message-wrapper{padding:.5rem 1.75rem}}.orders[_ngcontent-%COMP%]     .p-message-detail{font-family:themify22,sans-serif;margin:0rem .5rem .25rem 0rem;font-weight:800}.orders[_ngcontent-%COMP%]     .p-message.p-message-success{background:#80b12742;border:solid var(--main-color);border-width:0 0 0 6px;color:var(--main-color)}.orders[_ngcontent-%COMP%]     .p-message.p-message-success .p-message-icon{color:var(--main-color)}.orders[_ngcontent-%COMP%]   .single-item[_ngcontent-%COMP%]{border:1px solid #F1F1F1;border-radius:10px;overflow:hidden}.orders[_ngcontent-%COMP%]   .item-img[_ngcontent-%COMP%]{width:120px;height:145px}.orders[_ngcontent-%COMP%]   .item-img[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{object-fit:cover;width:100%;height:100%}"]});let n=s;return n})();var it=[{path:"",redirectTo:"Allorders",pathMatch:"full"},{path:"Allorders",component:Ie},{path:"orderDetails/:id",component:we},{path:"cart",canActivate:[fe],component:Pe}],Me=(()=>{let s=class s{};s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=G({type:s}),s.\u0275inj=Q({imports:[ne.forChild(it),ne]});let n=s;return n})();var Lt=(()=>{let s=class s{};s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=G({type:s}),s.\u0275inj=Q({imports:[me,Me,ve]});let n=s;return n})();export{Lt as OrdersModule};
