import{$ as h,A as m,D as R,F as g,Ga as Z,H as d,Ha as G,Ia as w,J as F,K as l,Ka as H,L as c,La as K,M as v,P as I,Q as D,R as u,Sa as W,Ta as q,Ua as Q,Y as T,Z as p,_ as N,fa as j,fc as O,hc as M,ja as _,ka as y,kb as X,lb as tt,n as x,na as L,nb as et,nc as it,oc as nt,pa as E,q as A,qa as U,r as b,ra as k,s as C,sa as P,t as S,ta as J,ua as z,v as B,va as Y,y as $,z as r,za as V}from"./chunk-IY7OHWIH.js";function gt(e,i){if(e&1){let a=I();l(0,"img",29),D("error",function(o){C(a);let s=u(3);return S(s.handleNotifcationImage(o))}),c()}if(e&2){let a=u().$implicit,t=u(2);d("src",((a==null?null:a.user_type)=="user"?t.user.userImageUrl:t.user.facilityImageUrl)+(a==null?null:a.img),$)}}function ht(e,i){e&1&&v(0,"img",30)}function _t(e,i){if(e&1&&(l(0,"h5",31),p(1),c()),e&2){let a=u().$implicit;r(),h(" ",a==null?null:a.user_name," ")}}function yt(e,i){e&1&&(l(0,"h5",31),p(1),_(2,"translate"),c()),e&2&&(r(),h(" ",y(2,1,"Admin")," "))}function vt(e,i){e&1&&(l(0,"span"),p(1," \u0645\u0646\u0630 "),c())}function Mt(e,i){e&1&&(l(0,"span"),p(1," ago "),c())}function xt(e,i){e&1&&v(0,"span",32)}function bt(e,i){if(e&1){let a=I();l(0,"div",18,0),D("click",function(){let o=C(a).$implicit,s=T(1),n=T(21),f=u(2);return S(f.readNotification(o,s,n))}),l(2,"div",19)(3,"div",20),g(4,gt,1,1,"img",21)(5,ht,1,0,"img",22),c(),l(6,"div",23),g(7,_t,2,1,"h5",24)(8,yt,3,3,"h5",24),l(9,"h6",25),p(10),c(),l(11,"p",25),g(12,vt,2,0,"span",26),l(13,"span"),p(14),_(15,"arabicNumber"),c(),l(16,"span"),p(17),c(),g(18,Mt,2,0,"span",26),c()()(),l(19,"div")(20,"div",27,1),g(22,xt,1,0,"span",28),c()()()}if(e&2){let a=i.$implicit,t=i.index,o=u(2);F(a.status=="1"?"border-read":"border-unread"),r(4),d("ngIf",(a==null?null:a.page_type)!=="admin_notification"),r(),d("ngIf",(a==null?null:a.page_type)=="admin_notification"),r(2),d("ngIf",(a==null?null:a.page_type)!=="admin_notification"),r(),d("ngIf",(a==null?null:a.page_type)=="admin_notification"),r(2),h(" ",a==null?null:a.body," "),r(2),d("ngIf",o.lang=="ar"),r(2),h(" ",y(15,12,o.elpased[t])," "),r(3),h(" ",o.scale[t]," "),r(),d("ngIf",o.lang=="en"),r(4),d("ngIf",a.status=="0")}}function Ct(e,i){if(e&1&&(l(0,"div",16),g(1,bt,23,14,"div",17),c()),e&2){let a=u();r(),d("ngForOf",a.notifications)}}function St(e,i){if(e&1){let a=I();l(0,"div",33),D("scrolled",function(){C(a);let o=u();return S(o.onScroll())}),c()}e&2&&d("infiniteScrollDistance",2)("infiniteScrollThrottle",1e3)}function It(e,i){e&1&&(l(0,"div",34),p(1),_(2,"translate"),c()),e&2&&(r(),h(" ",y(2,1,"no notifications")," "))}function Dt(e,i){e&1&&(l(0,"div",35),v(1,"ngx-spinner",36),c()),e&2&&(r(),d("fullScreen",!1))}function Nt(e,i){e&1&&(l(0,"div",37)(1,"span",38),p(2),_(3,"translate"),c()()),e&2&&(r(2),h(" ",y(3,1,"no more notifications")," "))}var at=(()=>{let i=class i{constructor(t,o,s,n,f,ct,dt,pt,mt,ft,ut){this.notify=t,this.translate=o,this.platformId=s,this.datePipe=n,this.render=f,this.dialogService=ct,this.arabicNumberPipe=dt,this.router=pt,this.spinner=mt,this.user=ft,this.common=ut,this.notifications=[],this.notifyDate=[],this.formattedDate=[],this.loading=!0,this.dataDone=!1,this.nodata=!1,this.noMoreNotifications=!1,this.start=15,this.timeZone="",this.timeZoneOffset=0,this.scale=[],this.elpased=[],Y(this.platformId)&&(this.lat=parseInt(localStorage.getItem("lat")),this.lon=parseInt(localStorage.getItem("lon")),this.translate.addLangs(["en","ar"]),this.translate.setDefaultLang("en"),this.translate.use(localStorage.getItem("front-lang")==null?"ar":localStorage.getItem("front-lang")),this.lang=localStorage.getItem("front-lang"))}ngOnInit(){this.getNotificationsList()}getNotificationsList(t=0,o=15){this.spinner.show(),this.notify.getNotificationsList(t,o).subscribe({next:s=>{console.log(s),s?.success?(s?.data.forEach(n=>{this.notifications.push(n),this.getElpasedAndScaleTime(this.elpased,this.scale,n?.date_added)}),this.dataDone=!0,this.nodata=!1):this.notifications.length>0?this.noMoreNotifications=!0:this.nodata=!0,this.spinner.hide(),this.loading=!1},error:s=>{console.log(s),this.spinner.hide(),this.loading=!1,this.dataDone=!1,this.nodata=!0}})}readNotification(t,o,s){this.render.removeClass(o,"py-4"),this.render.addClass(o,"py-3"),this.render.removeClass(o,"border-unread"),this.render.addClass(o,"border-read"),this.render.addClass(s,"d-none"),t.status=="0"&&this.notify.readNotifications(t.id).subscribe({next:n=>{console.log(n),n?.success&&this.user.getUnReadNotificationNum().subscribe({next:f=>{console.log(f),f?.UnReadNotificationNum?this.user.notifyNum.next(f?.UnReadNotificationNum):this.user.notifyNum.next(0)},error:f=>{console.log(f)}})},error:n=>{console.log(n)}}),console.log(t?.page_type),setTimeout(()=>{if(t?.page_type=="addOrder"||t?.page_type=="TheOrderIsReceived"||t?.page_type=="TheOrderIsCanceled")this.router.navigate(["/orders/orderDetails/",t.url]);else if(t?.page_type=="likePost"||t?.page_type=="addPost")this.router.navigate(["/facility/post/",t.url]);else if(t?.page_type=="addComment"||t?.page_type=="likeComment")this.router.navigate(["/facility/post/",t.url],{queryParams:{sub_url:t?.sub_url}});else if(t?.page_type=="addReplay"||t?.page_type=="likeReplay")this.router.navigate(["/facility/post/",t.url],{queryParams:{sub_url:t?.sub_url,sub_sub_url:t?.sub_sub_url}});else{if(t?.page_type=="admin_notification")return;if(t?.page_type=="likeFacility"||t?.page_type=="following"){let n={send_user_id:t?.send_user_id,type:t?.page_type};this.ref=this.dialogService.open(it,{header:t?.page_type=="following"?this.translate.instant("Followers"):this.translate.instant("Love"),data:n,width:"50vw",modal:!0,breakpoints:{"960px":"75vw","640px":"90vw"},contentStyle:{"max-height":"90vh",overflow:"auto"}});return}else return}},500)}formatDate(t,o){let s=new Date(t),n=this.datePipe.transform(s,"dd MMMM yyyy - hh:mm a",void 0,o);return o==="ar"&&(n=this.arabicNumberPipe.transform(n)),n||""}onScroll(){!this.noMoreNotifications&&this.notifications?.length>14&&(this.loading=!0,this.spinner.show(),this.getNotificationsList(this.start,15),this.start=this.start+15)}handleNotifcationImage(t){t.src="assets/images/notify.png"}getElpasedAndScaleTime(t,o,s){let n=(new Date().getTime()-new Date(s).getTime())/1e3/60/60;n<0?(t.push(this.common.lang_code=="ar"?"\u0627\u0644\u0622\u0646":"now"),o.push("")):n*60<2&&n>0?(t.push(Math.floor(n*60)),o.push(this.common.lang_code=="ar"?"\u062F\u0642\u064A\u0642\u0629":"minute")):n*60>2&&n*60<60?(t.push(Math.floor(n*60)),o.push(this.common.lang_code=="ar"?"\u062F\u0642\u0627\u0626\u0642":"minutes")):n>1&&n<2?(t.push(Math.floor(n)),o.push(this.common.lang_code=="ar"?"\u0633\u0627\u0639\u0629":"hour")):n>1&&n<24?(t.push(Math.floor(n)),o.push(this.common.lang_code=="ar"?"\u0633\u0627\u0639\u0627\u062A":"hours")):n>24&&n<48?(t.push(Math.floor(n/24)),o.push(this.common.lang_code=="ar"?"\u064A\u0648\u0645":"day")):n>48&&n<168?(t.push(Math.floor(n/24)),o.push(this.common.lang_code=="ar"?"\u0623\u064A\u0627\u0645":"days")):n>168&&n<720?(t.push(Math.floor(n/24/7)),o.push(this.common.lang_code=="ar"?"\u0627\u0633\u0628\u0648\u0639":"week")):n>720&&n<8760?(t.push(Math.floor(n/24/7/4)),o.push(this.common.lang_code=="ar"?"\u0634\u0647\u0631":"month")):n>8760&&(t.push(Math.floor(n/24/365.25)),o.push(this.common.lang_code=="ar"?"\u0633\u0646\u0629":"year"))}};i.\u0275fac=function(o){return new(o||i)(m(Q),m(H),m(B),m(P),m(R),m(O),m(M),m(Z),m(X),m(W),m(q))},i.\u0275cmp=A({type:i,selectors:[["app-all-notifications"]],features:[j([P,J,M,O])],decls:23,vars:14,consts:[["notify",""],["ball",""],[1,"notufy","mt-2"],[1,"container"],[1,"row","gy-3"],[1,"col-12"],[1,"breadcrumbb","position-relative",2,"z-index","12"],[1,"position-relative",2,"z-index","12"],["src","assets/images/orderBreadcrumb.png","alt","orderBreadcrumb",1,"position-absolute","top-0","start-0","w-100","h-100"],["routerLink","/",1,"main-breadcrumb","text-white"],[1,"mx-2"],["class","col-md-7 p-3 bg-white rounded-3",4,"ngIf"],["infiniteScroll","",3,"infiniteScrollDistance","infiniteScrollThrottle","scrolled",4,"ngIf"],["class","col-md-7",4,"ngIf"],["class","col-md-7 position-relative mt-5",4,"ngIf"],["class","col-md-7 text-center",4,"ngIf"],[1,"col-md-7","p-3","bg-white","rounded-3"],["class","d-flex justify-content-between align-items-center notify-content my-2  cursor",3,"class","click",4,"ngFor","ngForOf"],[1,"d-flex","justify-content-between","align-items-center","notify-content","my-2","cursor",3,"click"],[1,"d-flex","align-items-center"],[1,"notify-img-container"],["alt","notify icon",3,"src","error",4,"ngIf"],["src","assets/images/Icon.jpg","alt","notify icon",4,"ngIf"],[1,"mx-4"],["class","main-color",4,"ngIf"],[1,""],[4,"ngIf"],[1,"me-2"],["class","un-read",4,"ngIf"],["alt","notify icon",3,"error","src"],["src","assets/images/Icon.jpg","alt","notify icon"],[1,"main-color"],[1,"un-read"],["infiniteScroll","",3,"scrolled","infiniteScrollDistance","infiniteScrollThrottle"],[1,"col-md-7"],[1,"col-md-7","position-relative","mt-5"],["bdColor","#fff","size","default","color","#80b127","type","ball-clip-rotate",3,"fullScreen"],[1,"col-md-7","text-center"],[1,"no-more"]],template:function(o,s){o&1&&(l(0,"section",2)(1,"div",3)(2,"div",4)(3,"div",5)(4,"div",6)(5,"h2",7),p(6),_(7,"translate"),c(),v(8,"img",8),l(9,"div",7)(10,"a",9),p(11),_(12,"translate"),c(),l(13,"span",10),p(14,">"),c(),l(15,"span"),p(16),_(17,"translate"),c()()()(),g(18,Ct,2,1,"div",11)(19,St,1,2,"div",12)(20,It,3,3,"div",13)(21,Dt,2,1,"div",14)(22,Nt,4,3,"div",15),c()()()),o&2&&(r(6),N(y(7,8,"notifications")),r(5),N(y(12,10,"Main")),r(5),N(y(17,12,"notifications")),r(2),d("ngIf",s.dataDone),r(),d("ngIf",s.notifications==null?null:s.notifications.length),r(),d("ngIf",s.nodata),r(),d("ngIf",s.loading),r(),d("ngIf",s.noMoreNotifications))},dependencies:[U,k,G,et,tt,K,M],styles:[".notufy[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#7a7a7a}.notufy[_ngcontent-%COMP%]   .breadcrumbb[_ngcontent-%COMP%]{margin:30px 0;padding:50px 40px;background-color:#80b127;color:#fff;border-radius:10px;overflow:hidden}@media screen and (max-width: 577px){.notufy[_ngcontent-%COMP%]   .breadcrumbb[_ngcontent-%COMP%]{margin:10px 0;padding:20px}}.notufy[_ngcontent-%COMP%]   .breadcrumbb[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{opacity:10%;transform:scale(1.1,3.5)}.notufy[_ngcontent-%COMP%]   .breadcrumbb[_ngcontent-%COMP%]   .main-breadcrumb[_ngcontent-%COMP%]{font-size:20px}.notufy[_ngcontent-%COMP%]   .notify-content[_ngcontent-%COMP%]{border:1px solid #F4F4F4;border-radius:10px;transition:.1s all;padding-inline:10px}.notufy[_ngcontent-%COMP%]   .notify-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#7a7a7a}.notufy[_ngcontent-%COMP%]   .border-read[_ngcontent-%COMP%]{border-color:#f4f4f4;padding-block:10px}.notufy[_ngcontent-%COMP%]   .border-unread[_ngcontent-%COMP%]{border-color:#80b127;padding-block:20px}.notufy[_ngcontent-%COMP%]   .un-read[_ngcontent-%COMP%]{width:20px;height:20px;display:inline-block;background-color:#80b127;border-radius:50%}.notufy[_ngcontent-%COMP%]   .notify-img-container[_ngcontent-%COMP%]{width:60px;height:60px;overflow:hidden;border-radius:50%}.notufy[_ngcontent-%COMP%]   .notify-img-container[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:100%;min-height:60px;object-fit:cover}.notufy[_ngcontent-%COMP%]   .no-more[_ngcontent-%COMP%]{border:1px solid #7A7A7A;border-radius:10px;padding:10px}"]});let e=i;return e})();var Pt=[{path:"",redirectTo:"all",pathMatch:"full"},{path:"all",component:at}],rt=(()=>{let i=class i{};i.\u0275fac=function(o){return new(o||i)},i.\u0275mod=b({type:i}),i.\u0275inj=x({imports:[w.forChild(Pt),w]});let e=i;return e})();function Ot(e){let i=e;return i===0?0:i===1?1:i===2?2:i%100===Math.floor(i%100)&&i%100>=3&&i%100<=10?3:i%100===Math.floor(i%100)&&i%100>=11&&i%100<=99?4:5}var st=["ar",[["\u0635","\u0645"],void 0,void 0],[["\u0635","\u0645"],void 0,["\u0635\u0628\u0627\u062D\u064B\u0627","\u0645\u0633\u0627\u0621\u064B"]],[["\u062D","\u0646","\u062B","\u0631","\u062E","\u062C","\u0633"],["\u0627\u0644\u0623\u062D\u062F","\u0627\u0644\u0627\u062B\u0646\u064A\u0646","\u0627\u0644\u062B\u0644\u0627\u062B\u0627\u0621","\u0627\u0644\u0623\u0631\u0628\u0639\u0627\u0621","\u0627\u0644\u062E\u0645\u064A\u0633","\u0627\u0644\u062C\u0645\u0639\u0629","\u0627\u0644\u0633\u0628\u062A"],void 0,["\u0623\u062D\u062F","\u0625\u062B\u0646\u064A\u0646","\u062B\u0644\u0627\u062B\u0627\u0621","\u0623\u0631\u0628\u0639\u0627\u0621","\u062E\u0645\u064A\u0633","\u062C\u0645\u0639\u0629","\u0633\u0628\u062A"]],void 0,[["\u064A","\u0641","\u0645","\u0623","\u0648","\u0646","\u0644","\u063A","\u0633","\u0643","\u0628","\u062F"],["\u064A\u0646\u0627\u064A\u0631","\u0641\u0628\u0631\u0627\u064A\u0631","\u0645\u0627\u0631\u0633","\u0623\u0628\u0631\u064A\u0644","\u0645\u0627\u064A\u0648","\u064A\u0648\u0646\u064A\u0648","\u064A\u0648\u0644\u064A\u0648","\u0623\u063A\u0633\u0637\u0633","\u0633\u0628\u062A\u0645\u0628\u0631","\u0623\u0643\u062A\u0648\u0628\u0631","\u0646\u0648\u0641\u0645\u0628\u0631","\u062F\u064A\u0633\u0645\u0628\u0631"],void 0],void 0,[["\u0642.\u0645","\u0645"],void 0,["\u0642\u0628\u0644 \u0627\u0644\u0645\u064A\u0644\u0627\u062F","\u0645\u064A\u0644\u0627\u062F\u064A"]],6,[5,6],["d\u200F/M\u200F/y","dd\u200F/MM\u200F/y","d MMMM y","EEEE\u060C d MMMM y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",void 0,"{1} \u0641\u064A {0}",void 0],[".",",",";","\u200E%\u200E","\u200E+","\u200E-","E","\xD7","\u2030","\u221E","\u0644\u064A\u0633\xA0\u0631\u0642\u0645\u064B\u0627",":"],["#,##0.###","#,##0%","\xA4\xA0#,##0.00","#E0"],"EGP","\u062C.\u0645.\u200F","\u062C\u0646\u064A\u0647 \u0645\u0635\u0631\u064A",{AED:["\u062F.\u0625.\u200F"],ARS:[void 0,"AR$"],AUD:["AU$"],BBD:[void 0,"BB$"],BHD:["\u062F.\u0628.\u200F"],BMD:[void 0,"BM$"],BND:[void 0,"BN$"],BSD:[void 0,"BS$"],BYN:[void 0,"\u0440."],BZD:[void 0,"BZ$"],CAD:["CA$"],CLP:[void 0,"CL$"],CNY:["CN\xA5"],COP:[void 0,"CO$"],CUP:[void 0,"CU$"],DOP:[void 0,"DO$"],DZD:["\u062F.\u062C.\u200F"],EGP:["\u062C.\u0645.\u200F","E\xA3"],FJD:[void 0,"FJ$"],GBP:["UK\xA3"],GYD:[void 0,"GY$"],HKD:["HK$"],IQD:["\u062F.\u0639.\u200F"],IRR:["\u0631.\u0625."],JMD:[void 0,"JM$"],JOD:["\u062F.\u0623.\u200F"],JPY:["JP\xA5"],KWD:["\u062F.\u0643.\u200F"],KYD:[void 0,"KY$"],LBP:["\u0644.\u0644.\u200F","L\xA3"],LRD:[void 0,"$LR"],LYD:["\u062F.\u0644.\u200F"],MAD:["\u062F.\u0645.\u200F"],MRU:["\u0623.\u0645."],MXN:["MX$"],NZD:["NZ$"],OMR:["\u0631.\u0639.\u200F"],PHP:[void 0,"\u20B1"],QAR:["\u0631.\u0642.\u200F"],SAR:["\u0631.\u0633.\u200F"],SBD:[void 0,"SB$"],SDD:["\u062F.\u0633.\u200F"],SDG:["\u062C.\u0633."],SRD:[void 0,"SR$"],SYP:["\u0644.\u0633.\u200F","\xA3"],THB:["\u0E3F"],TND:["\u062F.\u062A.\u200F"],TTD:[void 0,"TT$"],TWD:["NT$"],USD:["US$"],UYU:[void 0,"UY$"],YER:["\u0631.\u064A.\u200F"]},"rtl",Ot];function Tt(e){let i=e,a=Math.floor(Math.abs(e)),t=e.toString().replace(/^[^.]*\.?/,"").length;return a===1&&t===0?1:5}var lt=["en",[["a","p"],["AM","PM"],void 0],[["AM","PM"],void 0,void 0],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],void 0,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],void 0,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",void 0,"{1} 'at' {0}",void 0],[".",",",";","%","+","-","E","\xD7","\u2030","\u221E","NaN",":"],["#,##0.###","#,##0%","\xA4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",Tt];E(st);E(lt);var fe=(()=>{let i=class i{};i.\u0275fac=function(o){return new(o||i)},i.\u0275mod=b({type:i}),i.\u0275inj=x({providers:[{provide:L,useValue:"ar"}],imports:[z,rt,nt,V]});let e=i;return e})();export{fe as NotificationsModule};
